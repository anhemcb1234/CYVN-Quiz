{"ast":null,"code":"import axios from\"axios\";var axiosInstance=null;var headers={'Content-Type':'application/json'};function setHeaders(inputHeaders){headers=inputHeaders;}function getHeaders(){return headers;}function getInstance(){if(axiosInstance!=null){return axiosInstance;}axiosInstance=axios.create({baseURL:process.env.REACT_APP_API_URL,headers:getHeaders()});//hook interceptor cài ở đây\naxiosInstance.interceptors.request.use(function(config){var token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});axiosInstance.interceptors.response.use(function(response){return response;},function(error){if(error.response.status===401){localStorage.removeItem('token');}return Promise.reject(error);});return axiosInstance;}function get(endpointApiUrl){var payload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return getInstance().get(endpointApiUrl,{params:payload});}function post(endpointApiUrl){var payload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return getInstance().post(endpointApiUrl,payload);}function put(endpointApiUrl){var payload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return getInstance().put(endpointApiUrl,payload);}function del(endpointApiUrl){var payload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return getInstance().delete(endpointApiUrl,payload);}export var Axios={axiosInstance:axiosInstance,getHeaders:getHeaders,setHeaders:setHeaders,get:get,post:post,put:put,del:del};","map":{"version":3,"sources":["D:/test/src/services/Axios.js"],"names":["axios","axiosInstance","headers","setHeaders","inputHeaders","getHeaders","getInstance","create","baseURL","process","env","REACT_APP_API_URL","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","status","removeItem","Promise","reject","get","endpointApiUrl","payload","params","post","put","del","delete","Axios"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAIC,CAAAA,aAAa,CAAG,IAApB,CACA,GAAIC,CAAAA,OAAO,CAAG,CACV,eAAgB,kBADN,CAAd,CAIA,QAASC,CAAAA,UAAT,CAAoBC,YAApB,CAAkC,CAC9BF,OAAO,CAAGE,YAAV,CACH,CAED,QAASC,CAAAA,UAAT,EAAsB,CAClB,MAAOH,CAAAA,OAAP,CACH,CAED,QAASI,CAAAA,WAAT,EAAuB,CACnB,GAAIL,aAAa,EAAI,IAArB,CAA2B,CACvB,MAAOA,CAAAA,aAAP,CACH,CACDA,aAAa,CAAGD,KAAK,CAACO,MAAN,CAAa,CACzBC,OAAO,CAAEC,OAAO,CAACC,GAAR,CAAYC,iBADI,CAEzBT,OAAO,CAAEG,UAAU,EAFM,CAAb,CAAhB,CAIA;AACAJ,aAAa,CAACW,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CAAuC,SAAAC,MAAM,CAAI,CAC7C,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAIF,KAAJ,CAAW,CACPD,MAAM,CAACb,OAAP,CAAeiB,aAAf,kBAAyCH,KAAzC,EACH,CACD,MAAOD,CAAAA,MAAP,CACH,CAND,EAQAd,aAAa,CAACW,YAAd,CAA2BQ,QAA3B,CAAoCN,GAApC,CAAwC,SAAAM,QAAQ,CAAI,CAChD,MAAOA,CAAAA,QAAP,CACH,CAFD,CAEG,SAAAC,KAAK,CAAI,CACR,GAAIA,KAAK,CAACD,QAAN,CAAeE,MAAf,GAA0B,GAA9B,CAAmC,CAC/BL,YAAY,CAACM,UAAb,CAAwB,OAAxB,EACH,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP,CACH,CAPD,EAQA,MAAOpB,CAAAA,aAAP,CACH,CAED,QAASyB,CAAAA,GAAT,CAAaC,cAAb,CAA2C,IAAdC,CAAAA,OAAc,2DAAJ,EAAI,CACvC,MAAOtB,CAAAA,WAAW,GAAGoB,GAAd,CAAkBC,cAAlB,CAAkC,CACrCE,MAAM,CAAED,OAD6B,CAAlC,CAAP,CAGH,CAED,QAASE,CAAAA,IAAT,CAAcH,cAAd,CAA4C,IAAdC,CAAAA,OAAc,2DAAJ,EAAI,CACxC,MAAOtB,CAAAA,WAAW,GAAGwB,IAAd,CAAmBH,cAAnB,CAAmCC,OAAnC,CAAP,CACH,CAED,QAASG,CAAAA,GAAT,CAAaJ,cAAb,CAA2C,IAAdC,CAAAA,OAAc,2DAAJ,EAAI,CACvC,MAAOtB,CAAAA,WAAW,GAAGyB,GAAd,CAAkBJ,cAAlB,CAAkCC,OAAlC,CAAP,CACH,CAED,QAASI,CAAAA,GAAT,CAAaL,cAAb,CAA2C,IAAdC,CAAAA,OAAc,2DAAJ,EAAI,CACvC,MAAOtB,CAAAA,WAAW,GAAG2B,MAAd,CAAqBN,cAArB,CAAqCC,OAArC,CAAP,CACH,CAED,MAAO,IAAMM,CAAAA,KAAK,CAAG,CACjBjC,aAAa,CAAbA,aADiB,CAEjBI,UAAU,CAAVA,UAFiB,CAGjBF,UAAU,CAAVA,UAHiB,CAIjBuB,GAAG,CAAHA,GAJiB,CAKjBI,IAAI,CAAJA,IALiB,CAMjBC,GAAG,CAAHA,GANiB,CAOjBC,GAAG,CAAHA,GAPiB,CAAd","sourcesContent":["import axios from \"axios\";\r\n\r\nlet axiosInstance = null;\r\nlet headers = {\r\n    'Content-Type': 'application/json'\r\n}\r\n\r\nfunction setHeaders(inputHeaders) {\r\n    headers = inputHeaders;\r\n}\r\n\r\nfunction getHeaders() {\r\n    return headers;\r\n}\r\n\r\nfunction getInstance() {\r\n    if (axiosInstance != null) {\r\n        return axiosInstance\r\n    }\r\n    axiosInstance = axios.create({\r\n        baseURL: process.env.REACT_APP_API_URL,\r\n        headers: getHeaders()\r\n    })\r\n    //hook interceptor cài ở đây\r\n    axiosInstance.interceptors.request.use(config => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    })\r\n\r\n    axiosInstance.interceptors.response.use(response => {\r\n        return response;\r\n    }, error => {\r\n        if (error.response.status === 401) {\r\n            localStorage.removeItem('token');\r\n        }\r\n        return Promise.reject(error);\r\n    })\r\n    return axiosInstance;\r\n}\r\n\r\nfunction get(endpointApiUrl, payload = {}) {\r\n    return getInstance().get(endpointApiUrl, {\r\n        params: payload\r\n    })\r\n}\r\n\r\nfunction post(endpointApiUrl, payload = {}) {\r\n    return getInstance().post(endpointApiUrl, payload)\r\n}\r\n\r\nfunction put(endpointApiUrl, payload = {}) {\r\n    return getInstance().put(endpointApiUrl, payload);\r\n}\r\n\r\nfunction del(endpointApiUrl, payload = {}) {\r\n    return getInstance().delete(endpointApiUrl, payload)\r\n}\r\n\r\nexport const Axios = {\r\n    axiosInstance,\r\n    getHeaders,\r\n    setHeaders,\r\n    get,\r\n    post,\r\n    put,\r\n    del\r\n}"]},"metadata":{},"sourceType":"module"}