{"ast":null,"code":"import _toConsumableArray from\"D:/test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"D:/test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\test\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import{examsServices}from\"../services/examsServices\";import{Link,useNavigate,useSearchParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Ranking(){var _datas$sort;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),datas=_useState4[0],setDatas=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParam=_useSearchParams2[0];var _useState5=useState(function(){return localStorage.getItem(\"idUser\");}),_useState6=_slicedToArray(_useState5,2),idUser=_useState6[0],setIdUser=_useState6[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var reps;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(1);_context.next=4;return examsServices.getRanking();case 4:reps=_context.sent;setData(reps.data);console.log(reps.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}))();},[]);useEffect(function(){var cloneData=_toConsumableArray(data);cloneData.map(function(items){return items.examDTO.reduce(function(acc,item){return items.total=acc+item.totalScore;},0);});console.log(1);setDatas(cloneData);},[datas]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-md w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" flex items-center justify-between pb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-gray-600 font-semibold\",children:\"Ranking\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Top user\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"lg:ml-40 ml-10 space-x-8\",children:/*#__PURE__*/_jsx(Link,{to:\"/choose-quiz?userName=\".concat(localStorage.getItem(\"userName\"),\"&id=\").concat(localStorage.getItem(\"idUser\")),children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-600 px-4 py-2 rounded-md text-white font-semibold tracking-wide cursor-pointer\",children:\"Go to Home page\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inline-block min-w-full shadow rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full leading-normal\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"No.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Name user\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Email user\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Total number of exams\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Total point\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:datas===null||datas===void 0?void 0:(_datas$sort=datas.sort(function(a,b){return b.total-a.total;}))===null||_datas$sort===void 0?void 0:_datas$sort.map(function(item,index){var _item$examDTO,_item$examDTO2;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-5 py-5 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 whitespace-no-wrap\",children:index+1})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-5 py-5 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 whitespace-no-wrap\",children:item===null||item===void 0?void 0:item.username})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-5 py-5 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 whitespace-no-wrap\",children:item===null||item===void 0?void 0:item.email})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-5 py-5 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 whitespace-no-wrap text-center\",children:item===null||item===void 0?void 0:(_item$examDTO=item.examDTO)===null||_item$examDTO===void 0?void 0:_item$examDTO.length})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-5 py-5 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 text-center whitespace-no-wrap\",children:item===null||item===void 0?void 0:(_item$examDTO2=item.examDTO)===null||_item$examDTO2===void 0?void 0:_item$examDTO2.reduce(function(acc,cur){return acc+cur.totalScore;},0)})})]},index)});})})]})})})})]})});}export default Ranking;","map":{"version":3,"sources":["D:/test/src/pages/Ranking.js"],"names":["React","useEffect","useState","examsServices","Link","useNavigate","useSearchParams","Ranking","data","setData","datas","setDatas","searchParam","localStorage","getItem","idUser","setIdUser","console","log","getRanking","reps","cloneData","map","items","examDTO","reduce","acc","item","total","totalScore","sort","a","b","index","username","email","length","cur"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { examsServices } from \"../services/examsServices\";\r\nimport { Link, useNavigate, useSearchParams } from \"react-router-dom\";\r\n\r\nfunction Ranking() {\r\n  const [data, setData] = useState([]);\r\n  const [datas, setDatas] = useState([]);\r\n  const [searchParam] = useSearchParams();\r\n  const [idUser, setIdUser] = useState(() => {\r\n    return localStorage.getItem(\"idUser\");\r\n  });\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        console.log(1);\r\n        const reps = await examsServices.getRanking();\r\n        setData(reps.data);\r\n        console.log(reps.data);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    })();\r\n  }, []);\r\n  useEffect(() => {\r\n    let cloneData = [...data];\r\n    cloneData.map((items) =>\r\n      items.examDTO.reduce((acc, item) => {\r\n        return (items.total = acc + item.totalScore);\r\n      }, 0)\r\n    );\r\n    console.log(1);\r\n    setDatas(cloneData);\r\n  }, [datas]);\r\n  return (\r\n    <>\r\n      <div className=\"bg-white p-8 rounded-md w-full\">\r\n        <div className=\" flex items-center justify-between pb-6\">\r\n          <div>\r\n            <h2 className=\"text-gray-600 font-semibold\">Ranking</h2>\r\n            <span className=\"text-xs\">Top user</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"lg:ml-40 ml-10 space-x-8\">\r\n              <Link\r\n                to={`/choose-quiz?userName=${localStorage.getItem(\r\n                  \"userName\"\r\n                )}&id=${localStorage.getItem(\"idUser\")}`}\r\n              >\r\n                <button className=\"bg-red-600 px-4 py-2 rounded-md text-white font-semibold tracking-wide cursor-pointer\">\r\n                  Go to Home page\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto\">\r\n            <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\r\n              <table className=\"min-w-full leading-normal\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\r\n                      No.\r\n                    </th>\r\n                    <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\r\n                      Name user\r\n                    </th>\r\n                    <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\r\n                      Email user\r\n                    </th>\r\n                    <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\r\n                      Total number of exams\r\n                    </th>\r\n                    <th className=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\r\n                      Total point\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {datas\r\n                    ?.sort((a, b) => b.total - a.total)\r\n                    ?.map((item, index) => (\r\n                      <>\r\n                        <tr key={index}>\r\n                          <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\r\n                            <div className=\"flex items-center\">\r\n                              <p className=\"text-gray-900 whitespace-no-wrap\">\r\n                                {index + 1}\r\n                              </p>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\r\n                            <div className=\"flex items-center\">\r\n                              <p className=\"text-gray-900 whitespace-no-wrap\">\r\n                                {item?.username}\r\n                              </p>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\r\n                            <div className=\"flex items-center\">\r\n                              <p className=\"text-gray-900 whitespace-no-wrap\">\r\n                                {item?.email}\r\n                              </p>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\r\n                            <p className=\"text-gray-900 whitespace-no-wrap text-center\">\r\n                              {item?.examDTO?.length}\r\n                            </p>\r\n                          </td>\r\n                          <td className=\"px-5 py-5 border-b border-gray-200 bg-white text-sm\">\r\n                            <p className=\"text-gray-900 text-center whitespace-no-wrap\">\r\n                              {item?.examDTO?.reduce((acc, cur) => {\r\n                                return acc + cur.totalScore;\r\n                              }, 0)}\r\n                            </p>\r\n                          </td>\r\n                        </tr>\r\n                      </>\r\n                    ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default Ranking;\r\n"]},"metadata":{},"sourceType":"module"}