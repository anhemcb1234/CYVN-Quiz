{"ast":null,"code":"import axios from \"axios\";\nlet axiosInstance = null;\nlet headers = {\n  'Content-Type': 'application/json'\n};\n\nfunction setHeaders(inputHeaders) {\n  headers = inputHeaders;\n}\n\nfunction getHeaders() {\n  return headers;\n}\n\nfunction getInstance() {\n  if (axiosInstance != null) {\n    return axiosInstance;\n  }\n\n  axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_API_URL,\n    headers: getHeaders()\n  }); //hook interceptor cài ở đây\n\n  axiosInstance.interceptors.request.use(config => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    return config;\n  });\n  axiosInstance.interceptors.response.use(response => {\n    return response;\n  }, error => {\n    if (error.response.status === 401) {\n      localStorage.removeItem('token');\n    }\n\n    return Promise.reject(error);\n  });\n  return axiosInstance;\n}\n\nfunction get(endpointApiUrl) {\n  let payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getInstance().get(endpointApiUrl, {\n    params: payload\n  });\n}\n\nfunction post(endpointApiUrl) {\n  let payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getInstance().post(endpointApiUrl, payload);\n}\n\nfunction put(endpointApiUrl) {\n  let payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getInstance().put(endpointApiUrl, payload);\n}\n\nfunction del(endpointApiUrl) {\n  let payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getInstance().delete(endpointApiUrl, payload);\n}\n\nexport const Axios = {\n  axiosInstance,\n  getHeaders,\n  setHeaders,\n  get,\n  post,\n  put,\n  del\n};","map":{"version":3,"sources":["D:/test/src/services/Axios.js"],"names":["axios","axiosInstance","headers","setHeaders","inputHeaders","getHeaders","getInstance","create","baseURL","process","env","REACT_APP_API_URL","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","status","removeItem","Promise","reject","get","endpointApiUrl","payload","params","post","put","del","delete","Axios"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAIC,aAAa,GAAG,IAApB;AACA,IAAIC,OAAO,GAAG;AACV,kBAAgB;AADN,CAAd;;AAIA,SAASC,UAAT,CAAoBC,YAApB,EAAkC;AAC9BF,EAAAA,OAAO,GAAGE,YAAV;AACH;;AAED,SAASC,UAAT,GAAsB;AAClB,SAAOH,OAAP;AACH;;AAED,SAASI,WAAT,GAAuB;AACnB,MAAIL,aAAa,IAAI,IAArB,EAA2B;AACvB,WAAOA,aAAP;AACH;;AACDA,EAAAA,aAAa,GAAGD,KAAK,CAACO,MAAN,CAAa;AACzBC,IAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,iBADI;AAEzBT,IAAAA,OAAO,EAAEG,UAAU;AAFM,GAAb,CAAhB,CAJmB,CAQnB;;AACAJ,EAAAA,aAAa,CAACW,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CAAuCC,MAAM,IAAI;AAC7C,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,QAAIF,KAAJ,EAAW;AACPD,MAAAA,MAAM,CAACb,OAAP,CAAeiB,aAAf,GAAgC,UAASH,KAAM,EAA/C;AACH;;AACD,WAAOD,MAAP;AACH,GAND;AAQAd,EAAAA,aAAa,CAACW,YAAd,CAA2BQ,QAA3B,CAAoCN,GAApC,CAAwCM,QAAQ,IAAI;AAChD,WAAOA,QAAP;AACH,GAFD,EAEGC,KAAK,IAAI;AACR,QAAIA,KAAK,CAACD,QAAN,CAAeE,MAAf,KAA0B,GAA9B,EAAmC;AAC/BL,MAAAA,YAAY,CAACM,UAAb,CAAwB,OAAxB;AACH;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH,GAPD;AAQA,SAAOpB,aAAP;AACH;;AAED,SAASyB,GAAT,CAAaC,cAAb,EAA2C;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACvC,SAAOtB,WAAW,GAAGoB,GAAd,CAAkBC,cAAlB,EAAkC;AACrCE,IAAAA,MAAM,EAAED;AAD6B,GAAlC,CAAP;AAGH;;AAED,SAASE,IAAT,CAAcH,cAAd,EAA4C;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACxC,SAAOtB,WAAW,GAAGwB,IAAd,CAAmBH,cAAnB,EAAmCC,OAAnC,CAAP;AACH;;AAED,SAASG,GAAT,CAAaJ,cAAb,EAA2C;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACvC,SAAOtB,WAAW,GAAGyB,GAAd,CAAkBJ,cAAlB,EAAkCC,OAAlC,CAAP;AACH;;AAED,SAASI,GAAT,CAAaL,cAAb,EAA2C;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACvC,SAAOtB,WAAW,GAAG2B,MAAd,CAAqBN,cAArB,EAAqCC,OAArC,CAAP;AACH;;AAED,OAAO,MAAMM,KAAK,GAAG;AACjBjC,EAAAA,aADiB;AAEjBI,EAAAA,UAFiB;AAGjBF,EAAAA,UAHiB;AAIjBuB,EAAAA,GAJiB;AAKjBI,EAAAA,IALiB;AAMjBC,EAAAA,GANiB;AAOjBC,EAAAA;AAPiB,CAAd","sourcesContent":["import axios from \"axios\";\r\n\r\nlet axiosInstance = null;\r\nlet headers = {\r\n    'Content-Type': 'application/json'\r\n}\r\n\r\nfunction setHeaders(inputHeaders) {\r\n    headers = inputHeaders;\r\n}\r\n\r\nfunction getHeaders() {\r\n    return headers;\r\n}\r\n\r\nfunction getInstance() {\r\n    if (axiosInstance != null) {\r\n        return axiosInstance\r\n    }\r\n    axiosInstance = axios.create({\r\n        baseURL: process.env.REACT_APP_API_URL,\r\n        headers: getHeaders()\r\n    })\r\n    //hook interceptor cài ở đây\r\n    axiosInstance.interceptors.request.use(config => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    })\r\n\r\n    axiosInstance.interceptors.response.use(response => {\r\n        return response;\r\n    }, error => {\r\n        if (error.response.status === 401) {\r\n            localStorage.removeItem('token');\r\n        }\r\n        return Promise.reject(error);\r\n    })\r\n    return axiosInstance;\r\n}\r\n\r\nfunction get(endpointApiUrl, payload = {}) {\r\n    return getInstance().get(endpointApiUrl, {\r\n        params: payload\r\n    })\r\n}\r\n\r\nfunction post(endpointApiUrl, payload = {}) {\r\n    return getInstance().post(endpointApiUrl, payload)\r\n}\r\n\r\nfunction put(endpointApiUrl, payload = {}) {\r\n    return getInstance().put(endpointApiUrl, payload);\r\n}\r\n\r\nfunction del(endpointApiUrl, payload = {}) {\r\n    return getInstance().delete(endpointApiUrl, payload)\r\n}\r\n\r\nexport const Axios = {\r\n    axiosInstance,\r\n    getHeaders,\r\n    setHeaders,\r\n    get,\r\n    post,\r\n    put,\r\n    del\r\n}"]},"metadata":{},"sourceType":"module"}